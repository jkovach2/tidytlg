<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Column Metadata &amp; How tidytlg Sets Up Your Data Using tlgsetup • tidytlg</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Column Metadata &amp; How tidytlg Sets Up Your Data Using tlgsetup">
<meta property="og:description" content="tidytlg">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidytlg</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/tidytlg.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/freq.html">Frequency Analysis</a>
    </li>
    <li>
      <a href="../articles/symbols.html">Tips &amp; Tricks:  Including Symbols, Superscripts, Subscripts &amp; Line Breaks</a>
    </li>
    <li>
      <a href="../articles/tbl_manipulation.html">Manipulating tbl data frame</a>
    </li>
    <li>
      <a href="../articles/tlgsetup.html">Column Metadata &amp; How tidytlg Sets Up Your Data Using tlgsetup</a>
    </li>
    <li>
      <a href="../articles/univar.html">Univariate Statistics Analysis</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<!-- start dropdown for versions --> <li class="nav-item dropdown">
        <a href="#" class="nav-link dropdown-toggle"
          data-bs-toggle="dropdown" role="button"
          aria-expanded="false" aria-haspopup="true"
          id="dropdown-versions">Versions</a> <div class="dropdown-menu" aria-labelledby="dropdown-versions"> <a class="dropdown-item" data-toggle="tooltip" title="" href="https://pharmaverse.github.io/tidytlg/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://pharmaverse.github.io/tidytlg/devel">devel</a> </div></li>
<!-- end dropdown for versions -->
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/pharmaverse/tidytlg/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Column Metadata &amp; How tidytlg Sets Up Your
Data Using tlgsetup</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pharmaverse/tidytlg/blob/HEAD/vignettes/tlgsetup.Rmd" class="external-link"><code>vignettes/tlgsetup.Rmd</code></a></small>
      <div class="hidden name"><code>tlgsetup.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pharmaverse/tidytlg" class="external-link">tidytlg</a></span><span class="op">)</span></code></pre></div>
<p>The tlgsetup helper function was created to support generating
different column structures for our outputs. This allows us to specify
column types once that can be used across multiple outputs. This
metadata can be hardcoded as well (please see the code below), or pulled
from another source like a dataframe, file or database.</p>
<p>Here we see an example of the column metadata which defines our
columns, how to combine columns, column labels and spanning headers
across columns.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">column_metadata</span> <span class="op">&lt;-</span>
  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span>
    <span class="op">~</span><span class="va">tbltype</span>, <span class="op">~</span><span class="va">coldef</span>, <span class="op">~</span><span class="va">decode</span>,                <span class="op">~</span><span class="va">span1</span>,      
    <span class="st">"type1"</span>,  <span class="st">"0"</span>,     <span class="st">"Placebo"</span>,              <span class="st">""</span>,       
    <span class="st">"type1"</span>,  <span class="st">"54"</span>,    <span class="st">"Low Dose"</span>,             <span class="st">"Xanomeline"</span>,
    <span class="st">"type1"</span>,  <span class="st">"81"</span>,    <span class="st">"High Dose"</span>,            <span class="st">"Xanomeline"</span>,
    <span class="st">"type1"</span>,  <span class="st">"54+81"</span>, <span class="st">"Total Xanomeline"</span>,     <span class="st">""</span>
  <span class="op">)</span>
<span class="va">column_metadata</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 4</span></span>
<span class="co">#&gt;   tbltype coldef decode           span1       </span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> type1   0      Placebo          <span style="color: #949494;">""</span>          </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> type1   54     Low Dose         <span style="color: #949494;">"</span>Xanomeline<span style="color: #949494;">"</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> type1   81     High Dose        <span style="color: #949494;">"</span>Xanomeline<span style="color: #949494;">"</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span> type1   54+81  Total Xanomeline <span style="color: #949494;">""</span></span></code></pre></div>
<p>In this example, we would summarize Placebo, Xanomeline Low Dose, and
Xanomeline High Dose which are already available in the data. The helper
function will add the observations to the data for the Total Xanomeline
column based off of <code>coldef</code>. So for our adsl data, we will
add a spanning header for Xanomeline and a total Xanomeline column which
is a combination of the Xanomeline Low Dose and Xanomeline High
Dose.</p>
<p>In addition, the helper function will add the factor variable
<code>colnbr</code> which is used as our new column summary variable.
Note that our column summary variable has been converted to a factor.
This is required and allows us to define column order as well as label
in one variable.</p>
<p>Let’s read in adsl and check the dimensions.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"cdisc_adsl"</span><span class="op">)</span>
<span class="va">adsl</span> <span class="op">&lt;-</span> <span class="va">cdisc_adsl</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ITTFL</span> <span class="op">==</span> <span class="st">"Y"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">USUBJID</span>, <span class="va">TRT01PN</span>, <span class="va">TRT01P</span>, <span class="va">ITTFL</span>, <span class="va">SEX</span>, <span class="va">RACE</span>, <span class="va">AGE</span><span class="op">)</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">)</span>
<span class="co">#&gt; Rows: 15</span>
<span class="co">#&gt; Columns: 7</span>
<span class="co">#&gt; $ USUBJID <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "01-701-1015", "01-701-1023", "01-701-1047", "01-701-1118", "0…</span>
<span class="co">#&gt; $ TRT01PN <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0, 0, 0, 0, 0, 54, 54, 54, 54, 54, 81, 81, 81, 81, 81</span>
<span class="co">#&gt; $ TRT01P  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Placebo", "Placebo", "Placebo", "Placebo", "Placebo", "Xanome…</span>
<span class="co">#&gt; $ ITTFL   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y…</span>
<span class="co">#&gt; $ SEX     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "F", "M", "F", "M", "M", "M", "M", "F", "M", "M", "M", "F", "F…</span>
<span class="co">#&gt; $ RACE    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "WHITE", "WHITE", "WHITE", "WHITE", "WHITE", "WHITE", "WHITE",…</span>
<span class="co">#&gt; $ AGE     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 63, 64, 85, 52, 84, 74, 68, 81, 84, 71, 71, 77, 81, 75, 57</span></code></pre></div>
<pre><code><span class="co">#&gt; [1] "Dimensions prior to the tlgsetup call are 15 rows and 7 columns."</span></code></pre>
<p>Now let’s pass the adsl data through our tlgsetup function to add
observations to support the <code>type1</code> column structure and
check out the dimensions.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">setup_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tlgsetup.html">tlgsetup</a></span><span class="op">(</span><span class="va">adsl</span>,
                        var <span class="op">=</span> <span class="st">"TRT01PN"</span>,
                        column_metadata <span class="op">=</span> <span class="va">column_metadata</span><span class="op">)</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">setup_table</span><span class="op">)</span>
<span class="co">#&gt; Rows: 25</span>
<span class="co">#&gt; Columns: 9</span>
<span class="co">#&gt; $ tbltype <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "type1", "type1", "type1", "type1", "type1", "type1", "type1",…</span>
<span class="co">#&gt; $ colnbr  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> col1, col1, col1, col1, col1, col2, col2, col2, col2, col2, co…</span>
<span class="co">#&gt; $ USUBJID <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "01-701-1015", "01-701-1023", "01-701-1047", "01-701-1118", "0…</span>
<span class="co">#&gt; $ TRT01PN <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0", "0", "0", "0", "0", "54", "54", "54", "54", "54", "81", "…</span>
<span class="co">#&gt; $ TRT01P  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Placebo", "Placebo", "Placebo", "Placebo", "Placebo", "Xanome…</span>
<span class="co">#&gt; $ ITTFL   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y…</span>
<span class="co">#&gt; $ SEX     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "F", "M", "F", "M", "M", "M", "M", "F", "M", "M", "M", "F", "F…</span>
<span class="co">#&gt; $ RACE    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "WHITE", "WHITE", "WHITE", "WHITE", "WHITE", "WHITE", "WHITE",…</span>
<span class="co">#&gt; $ AGE     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 63, 64, 85, 52, 84, 74, 68, 81, 84, 71, 71, 77, 81, 75, 57, 74…</span></code></pre></div>
<pre><code><span class="co">#&gt; [1] "Dimensions after to the rmtsetup call are 25 rows and 9 columns."</span></code></pre>
<p>Here we see we have added two new variables, <code>colnbr</code> and
<code>tbltype</code>, which will now be used as our treatment variable
when generating our results.</p>
<p>If we take a look at the observation counts for <code>colnbr</code>,
we see the 168 records added to the data support
<code>Total Xanomeline</code> as we expected!</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">setup_table</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">colnbr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 2</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Groups:   colnbr [4]</span></span>
<span class="co">#&gt;   colnbr     n</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> col1       5</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> col2       5</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> col3       5</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span> col4      10</span></code></pre></div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Nicholas Masel, Steven Haesendonckx, Pelagia Alexandra Papadopoulou, Sheng-Wei Wang, Eli Miller, Nathan Kosiba, Aidan Ceney, Janssen R&amp;D.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
